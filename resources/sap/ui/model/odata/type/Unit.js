/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/merge","sap/ui/core/format/NumberFormat","sap/ui/model/type/Unit"],function(t,n,i){"use strict";var e=new Map;var o=i.extend("sap.ui.model.odata.type.Unit",{constructor:function(n,e,o){if(n&&n["customUnits"]){throw new Error("Format option customUnits is not supported")}if(e){throw new Error("Constraints not supported")}if(arguments.length>2){throw new Error("Only the parameter oFormatOptions is supported")}n=t({parseAsString:true,unitOptional:true},n);i.call(this,n,e,["customUnits"]);this.setConstraints=function(){throw new Error("Constraints not supported")};this.setFormatOptions=function(){throw new Error("Format options are immutable")};this.mCustomUnits=undefined}});o.prototype.formatValue=function(t,o){var s=this;function r(t){return t===undefined||t===null}if(!t||r(t[0])||r(t[1])||t[2]===undefined&&this.mCustomUnits===undefined){return null}if(this.mCustomUnits===undefined){if(t[2]===null){this.mCustomUnits=null}else{this.mCustomUnits=e.get(t[2]);if(!this.mCustomUnits){this.mCustomUnits={};Object.keys(t[2]).forEach(function(i){s.mCustomUnits[i]={decimals:t[2][i].UnitSpecificScale,displayName:t[2][i].Text,"unitPattern-count-other":n.getDefaultUnitPattern(i)}});e.set(t[2],this.mCustomUnits)}}}t=t.slice(0,2);if(this.mCustomUnits){t[2]=this.mCustomUnits}return i.prototype.formatValue.call(this,t,o)};o.prototype.getInterface=function(){return this};o.prototype.getName=function(){return"sap.ui.model.odata.type.Unit"};o.prototype.parseValue=function(t,n){if(!this.mCustomUnits){throw new Error("Cannot parse value without unit customizing")}return i.prototype.parseValue.apply(this,arguments)};o.prototype.validateValue=function(t){if(this.mCustomUnits===undefined){throw new Error("Cannot validate value without unit customizing")}};return o});