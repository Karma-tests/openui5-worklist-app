/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/cards/BaseContent","sap/viz/ui5/controls/VizFrame","sap/viz/ui5/controls/common/feeds/FeedItem","sap/viz/ui5/data/FlattenedDataset","sap/base/Log"],function(e,t,i,a,n){"use strict";var r={Top:"top",Bottom:"bottom",Left:"left",Right:"right"};var s={TopLeft:"topLeft",Center:"center"};var o={Left:"left",Center:"center",Right:"right"};var l={Line:"line",StackedColumn:"stacked_column",StackedBar:"stacked_bar",Donut:"donut"};var u=e.extend("sap.f.cards.AnalyticalContent",{renderer:{}});u.prototype._getVizPropertiesObject=function(e){var t=e.title,i=e.legend,a=e.plotArea;if(!e){return this}var n={title:{style:{fontWeight:"normal"},layout:{respectPlotPosition:false}},legend:{},legendGroup:{layout:{}},plotArea:{window:{start:"firstDataPoint",end:"lastDataPoint"}},categoryAxis:{title:{}},valueAxis:{title:{}}};if(t){n.title.text=t.text;n.title.visible=t.visible;n.title.alignment=o[t.alignment]}if(i){n.legend.visible=i.visible;n.legendGroup.layout.position=r[i.position];n.legendGroup.layout.alignment=s[i.alignment]}if(a){if(a.dataLabel){n.plotArea.dataLabel=a.dataLabel}if(a.categoryAxisText){n.categoryAxis.title.visible=a.categoryAxisText.visible}if(a.valueAxisText){n.valueAxis.title.visible=a.valueAxisText.visible}}return n};u.prototype._updateModel=function(){this._createChart();e.prototype._updateModel.apply(this,arguments)};u.prototype._createChart=function(){var e=this.getConfiguration();if(!e.chartType){n.error("ChartType is a mandatory property");return}var r=[];if(e.dimensions){var s=[];for(var o=0;o<e.dimensions.length;o++){var u=e.dimensions[o];var p=u.value.substring(1,u.value.length-1);r.push(p);var v={name:p,value:u.value};s.push(v)}}var d=[];if(e.measures){var g=[];for(var o=0;o<e.measures.length;o++){var f=e.measures[o];var p=f.value.substring(1,f.value.length-1);d.push(p);var h={name:p,value:f.value};g.push(h)}}var c=new a({measures:g,dimensions:s,data:{path:this.getBindingContext().getPath()}});var m=new t({uiConfig:{applicationSet:"fiori"},height:"100%",width:"100%",vizType:l[e.chartType],dataset:c,legendVisible:e.legend,feeds:[new i({uid:e.measureAxis,type:"Measure",values:d}),new i({uid:e.dimensionAxis,type:"Dimension",values:r})]});var y=this._getVizPropertiesObject(e);m.setVizProperties(y);this.setAggregation("_content",m)};u.prototype.onBeforeRendering=function(){if(this._handleHostConfiguration){this._handleHostConfiguration()}};return u});