/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/cards/BaseContent","sap/m/HBox","sap/m/VBox","sap/m/Text","sap/m/Title","sap/f/Avatar","sap/m/Link","sap/m/Label","sap/ui/core/ResizeHandler","sap/ui/layout/AlignedFlowLayout","sap/ui/dom/units/Rem"],function(e,t,a,s,i,r,n,o,l,d,p){"use strict";var u=e.extend("sap.f.cards.ObjectContent",{renderer:{}});u.prototype._getRootContainer=function(){if(this._bIsBeingDestroyed){return null}var e=this.getAggregation("_content");if(!e){e=new d;this.setAggregation("_content",e)}this._sResizeListenerId=l.register(e,this.onAlignedFlowLayoutResize.bind(this));return e};u.prototype.onAlignedFlowLayoutResize=function(e){if(e&&e.size.width===e.oldSize.width&&!e.control){return}var t=e.control,a=t.getMinItemWidth(),s=t.getContent().length,i;if(a.lastIndexOf("rem")!==-1){i=p.toPx(a)}else if(a.lastIndexOf("px")!==-1){i=parseFloat(a)}var r=Math.floor(e.size.width/i);if(r>s){r=s}if(this._iColsOld===r){return}this._iColsOld=r;var n=r-1,o=Math.ceil(s/r);t.getContent().forEach(function(e,t){e.addStyleClass("sapFCardObjectSpaceBetweenGroup");if(n===t&&n<s){e.removeStyleClass("sapFCardObjectSpaceBetweenGroup");n+=r}if(t+1>(o-1)*r){e.addStyleClass("sapFCardObjectGroupLastInColumn")}else{e.removeStyleClass("sapFCardObjectGroupLastInColumn")}})};u.prototype.exit=function(){if(this._sResizeListenerId){l.deregister(this._sResizeListenerId);this._sResizeListenerId=""}};u.prototype.setConfiguration=function(t){e.prototype.setConfiguration.apply(this,arguments);if(!t){return this}if(t.groups){this._addGroups()}return this};u.prototype._addGroups=function(){var e=this._getRootContainer();var l=this.getConfiguration().groups||[];l.forEach(function(l){var d=(new a).addStyleClass("sapFCardObjectGroup");var p=new i({text:l.title}).addStyleClass("sapFCardObjectItemTitle");d.addItem(p);l.items.forEach(function(e){var i,l=e.label,p=e.value,u,c;if(l){l=l[l.length-1]===":"?l:l+=":";u=new o({text:l}).addStyleClass("sapFCardObjectItemLabel")}if(p){switch(e.type){case"link":i=new n({href:e.url||p,text:p,target:e.target||"_blank"});break;case"email":c="mailto:"+p;if(e.emailSubject){c+="?subject="+e.emailSubject}i=new n({href:c,text:p});break;case"phone":i=new n({href:"tel:"+p,text:p});break;default:i=new s({text:p});break}}if(i){i.addStyleClass("sapFCardObjectItemText")}if(e.icon){var f=new t({items:[new r({customDisplaySize:"2.5rem",displaySize:"Custom",src:e.icon.src}).addStyleClass("sapFCardObjectItemAvatar sapFCardObjectItemLabel"),new a({items:[u,i]})]});d.addItem(f)}else{d.addItem(u);d.addItem(i)}});e.addContent(d)})};return u});