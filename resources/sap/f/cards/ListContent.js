/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/cards/BaseContent","sap/m/List","sap/m/StandardListItem","sap/ui/base/ManagedObject","sap/base/Log"],function(t,e,i,n,a){"use strict";var o=t.extend("sap.f.cards.ListContent",{renderer:{}});o.prototype._getList=function(){if(this._bIsBeingDestroyed){return null}var t=this.getAggregation("_content");if(!t){t=new e({id:this.getId()+"-list",growing:false,showNoData:false,showSeparators:"None"});this.setAggregation("_content",t)}return t};o.prototype.init=function(){t.prototype.init.apply(this,arguments);var e=this._getList();var n=this;e.attachUpdateFinished(function(){if(n._iVisibleItems){var t=e.getItems();for(var i=n._iVisibleItems+1;i<t.length;i++){t[i].setVisible(false)}}});this._oItemTemplate=new i({iconDensityAware:false})};o.prototype.exit=function(){if(this._oItemTemplate){this._oItemTemplate.destroy();this._oItemTemplate=null}};o.prototype.setConfiguration=function(e){t.prototype.setConfiguration.apply(this,arguments);if(!e){return this}if(e.item){this._setItem(e.item)}return this};o.prototype._setItem=function(t){t.title&&this._bindItemProperty("title",t.title.value);t.description&&this._bindItemProperty("description",t.description.value);t.icon&&t.icon.src&&this._bindItemProperty("icon",t.icon.src);t.highlight&&this._bindItemProperty("highlight",t.highlight);t.info&&this._bindItemProperty("info",t.info.value);t.info&&this._bindItemProperty("infoState",t.info.state);t.interactionType&&this._bindItemProperty("type",t.interactionType);this._attachActions(t);var e="/";var i=this.getConfiguration();if(i.data&&i.data.path){e=i.data.path}this._getList().bindItems({path:e,template:this._oItemTemplate})};o.prototype._bindItemProperty=function(t,e){if(!e){return}var i=n.bindingParser(e);if(i){this._oItemTemplate.bindProperty(t,i)}else{this._oItemTemplate.setProperty(t,e)}};o.prototype._attachActions=function(t){if(!t.actions){return}var e=t.actions[0];if(e.type==="Navigation"&&e.enabled){this._attachNavigationAction(e)}};o.prototype._attachNavigationAction=function(t){if(t.service){this._oItemTemplate.attachPress(function(e){this.getParent()._oServiceManager.getService("sap.ui.integration.services.Navigation").then(function(i){if(i){i.navigate({parameters:e.getParameters(),manifestParameters:t.parameters})}}).catch(function(){a.error("Navigation service unavailable")})}.bind(this))}else if(t.url){this._oItemTemplate.attachPress(function(){window.open(t.url,t.target||"_blank")})}};return o});